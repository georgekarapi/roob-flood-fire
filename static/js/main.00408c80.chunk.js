(this["webpackJsonpcutler-dashboard"]=this["webpackJsonpcutler-dashboard"]||[]).push([[0],{229:function(t,e,n){},230:function(t,e,n){},481:function(t,e,n){"use strict";n.r(e);var a=n(4),c=n(1),i=n.n(c),r=n(16),l=n.n(r),s=(n(229),n(230),n(42)),o=n(496),j=n(498),u=n(500),b=n(499),d=n(503),h=n(181),O=n(231),p=n(258),x=Object(o.a)((function(t){return{root:{height:"100%"}}})),m=function(t){var e=t.viewport,n=(x(),Object(c.useState)({country:null,population:null,area:null,urban:null})),i=Object(s.a)(n,2),r=i[0],l=i[1];return Object(c.useEffect)((function(){if(e.wikidata){var t=e.wikidata,n=O.getEntities(t,["en"],["info","claims"],"json",!1);p(n).then((function(t){return t.json()})).then(O.parse.wd.entities).then((function(t){var e=t[Object.keys(t)[0]].claims;l({country:e.P17||null,population:e.P1082||null,area:e.P2046||null})}))}}),[e]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{mb:4,mt:4,children:Object(a.jsx)(d.a,{variant:"h5",children:e.place})}),Object(a.jsxs)(b.a,{mt:4,children:[Object(a.jsx)(d.a,{variant:"h6",children:"Population:"}),Object(a.jsx)(d.a,{children:new Number(r.population).toLocaleString(Object(h.a)())})]}),r.area&&Object(a.jsxs)(b.a,{mt:2,children:[Object(a.jsx)(d.a,{variant:"h6",children:"Area:"}),Object(a.jsxs)(d.a,{children:[r.area," km\xb2"]})]})]})},f=n(504),v=Object(o.a)((function(t){return{root:{height:"100%"}}})),w=function(t){var e=t.title,n=t.subtitle,c=t.child,i=v();return Object(a.jsx)(f.a,{className:i.root,children:Object(a.jsxs)(b.a,{m:4,children:[Object(a.jsxs)(b.a,{mb:4,mt:4,children:[Object(a.jsx)(b.a,{children:Object(a.jsx)(d.a,{variant:"h5",children:e})}),Object(a.jsx)(b.a,{children:n&&Object(a.jsx)(d.a,{variant:"caption",children:n})})]}),Object(a.jsx)(b.a,{mt:4,children:c})]})})};w.defaultProps={title:"",subtitle:""};var g=w,k=n(182),y=n.n(k),N=n(26),E=function(t){var e=t.viewport,n=Object(c.useState)([]),i=Object(s.a)(n,2),r=i[0],l=i[1];return Object(c.useEffect)((function(){null===e.lat&&null===e.long||y.a.get("".concat("https://api.weatherbit.io/v2.0/history/airquality","?lat=").concat(e.lat,"&lon=").concat(e.long,"&key=").concat("fa589bc88cc543be9d71984e717d3802")).then((function(t){if(t.data.data){var e=t.data.data.map((function(t){return{aqi:t.aqi,timestamp:new Date(t.timestamp_local).toLocaleDateString()}}));l(e.slice(Math.max(e.length-12,0)))}else l(null)}))}),[e]),Object(a.jsx)(j.a,{container:!0,justify:"center",children:Object(a.jsx)(j.a,{item:!0,children:r?Object(a.jsxs)(N.b,{width:460,height:180,data:r,children:[Object(a.jsx)(N.c,{strokeDasharray:"3 3"}),Object(a.jsx)(N.f,{dataKey:"timestamp"}),Object(a.jsx)(N.g,{}),Object(a.jsx)(N.e,{}),Object(a.jsx)(N.d,{}),Object(a.jsx)(N.a,{dataKey:"aqi",fill:"#82ca9d"})]}):Object(a.jsx)(d.a,{children:"Sorry doesn't exist in the database :/"})})})},S=n(46),I=n.n(S),P=n(190),z=n.n(P),q=Object(o.a)((function(t){return{map:{position:"absolute",width:"100%",top:0,bottom:0}}})),A=function(t){t.viewport;var e=t.setViewport,n=q(),i=Object(c.useRef)(null);return I.a.accessToken="pk.eyJ1IjoiZ2thcmFwaSIsImEiOiJja2kya25rcHUxZW5hMnNvYW5vYWc1d2tpIn0.i3-Wxd8bAusPYp2R16fQtQ",Object(c.useEffect)((function(){var t=new I.a.Map({container:i.current,style:"mapbox://styles/gkarapi/cki4z3dbx1bst19rn9i2zmkug",center:[10.015,44.895],attributionControl:!1,maxZoom:7.6,zoom:3.8}),n=new z.a({accessToken:I.a.accessToken,mapboxgl:I.a});return n.setTypes("country,place"),t.addControl(n,"top-left"),t.addControl(new I.a.NavigationControl),n.on("result",(function(t){console.log(t),e({place:t.result.text||null,lat:t.result.center[0]||null,long:t.result.center[1]||null,wikidata:t.result.properties.wikidata||null})})),function(){return t.remove()}}),[]),Object(a.jsx)("div",{ref:i,className:n.map})},C=Object(o.a)((function(t){return{map:{zIndex:1},panel:{zIndex:2,position:"absolute",bottom:0}}})),J=function(){var t=C(),e=Object(c.useState)({place:null,lat:null,long:null,wikidata:null}),n=Object(s.a)(e,2),i=n[0],r=n[1];return Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)(A,{className:t.map,viewport:i,setViewport:r}),Object(a.jsx)(u.a,{direction:"up",in:i.place,mountOnEnter:!0,unmountOnExit:!0,children:Object(a.jsxs)(j.a,{container:!0,className:t.panel,children:[Object(a.jsx)(j.a,{item:!0,md:6,sm:6,xs:12,children:Object(a.jsx)(g,{child:Object(a.jsx)(m,{viewport:i})})}),Object(a.jsx)(j.a,{item:!0,md:6,sm:6,xs:12,children:Object(a.jsx)(g,{title:"Air Quality",child:Object(a.jsx)(E,{viewport:i})})})]})})]})};var M=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(J,{})})};l.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(M,{})}),document.getElementById("root"))}},[[481,1,2]]]);
//# sourceMappingURL=main.00408c80.chunk.js.map