(this["webpackJsonpcutler-dashboard"]=this["webpackJsonpcutler-dashboard"]||[]).push([[0],{229:function(t,e,n){},230:function(t,e,n){},481:function(t,e,n){"use strict";n.r(e);var a=n(4),c=n(1),i=n.n(c),r=n(16),o=n.n(r),l=(n(229),n(230),n(42)),s=n(496),j=n(498),u=n(500),b=n(499),d=n(503),O=n(181),h=n(231),p=n(258),x=Object(s.a)((function(t){return{root:{height:"100%"}}})),m=function(t){var e=t.viewport,n=(x(),Object(c.useState)({country:null,population:null,area:null,urban:null})),i=Object(l.a)(n,2),r=i[0],o=i[1];return Object(c.useEffect)((function(){if(e.wikidata){var t=e.wikidata,n=h.getEntities(t,["en"],["info","claims"],"json",!1);p(n).then((function(t){return t.json()})).then(h.parse.wd.entities).then((function(t){var e=t[Object.keys(t)[0]].claims;o({country:e.P17||null,population:e.P1082||null,area:e.P2046||null})}))}}),[e]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{mb:4,mt:4,children:Object(a.jsx)(d.a,{variant:"h5",children:e.place})}),Object(a.jsxs)(b.a,{mt:4,children:[Object(a.jsx)(d.a,{variant:"h6",children:"Population:"}),Object(a.jsx)(d.a,{children:new Number(r.population).toLocaleString(Object(O.a)())})]}),r.area&&Object(a.jsxs)(b.a,{mt:2,children:[Object(a.jsx)(d.a,{variant:"h6",children:"Area:"}),Object(a.jsxs)(d.a,{children:[r.area," km\xb2"]})]})]})},f=n(504),v=Object(s.a)((function(t){return{root:{height:"100%"}}})),w=function(t){var e=t.title,n=t.subtitle,c=t.child,i=v();return Object(a.jsx)(f.a,{className:i.root,children:Object(a.jsxs)(b.a,{m:4,children:[Object(a.jsxs)(b.a,{mb:4,mt:4,children:[Object(a.jsx)(b.a,{children:Object(a.jsx)(d.a,{variant:"h5",children:e})}),Object(a.jsx)(b.a,{children:n&&Object(a.jsx)(d.a,{variant:"caption",children:n})})]}),Object(a.jsx)(b.a,{mt:4,children:c})]})})};w.defaultProps={title:"",subtitle:""};var S=w,E=n(182),g=n.n(E),T=n(26),k=function(t){var e=t.viewport,n=Object({NODE_ENV:"production",PUBLIC_URL:"/waterfront-hack2020",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).APIWEATHERBITKEY,i=Object(c.useState)([]),r=Object(l.a)(i,2),o=r[0],s=r[1];return Object(c.useEffect)((function(){null===e.lat&&null===e.long||g.a.get("".concat("https://api.weatherbit.io/v2.0/history/airquality","?lat=").concat(e.lat,"&lon=").concat(e.long,"&key=").concat(n)).then((function(t){if(t.data.data){var e=t.data.data.map((function(t){return{aqi:t.aqi,timestamp:new Date(t.timestamp_local).toLocaleDateString()}}));s(e.slice(Math.max(e.length-12,0)))}else s(null)}))}),[e]),Object(a.jsx)(j.a,{container:!0,justify:"center",children:Object(a.jsx)(j.a,{item:!0,children:o?Object(a.jsxs)(T.b,{width:460,height:180,data:o,children:[Object(a.jsx)(T.c,{strokeDasharray:"3 3"}),Object(a.jsx)(T.f,{dataKey:"timestamp"}),Object(a.jsx)(T.g,{}),Object(a.jsx)(T.e,{}),Object(a.jsx)(T.d,{}),Object(a.jsx)(T.a,{dataKey:"aqi",fill:"#82ca9d"})]}):Object(a.jsx)(d.a,{children:"Sorry doesn't exist in the database :/"})})})},_=n(46),y=n.n(_),P=n(190),C=n.n(P),N=Object(s.a)((function(t){return{map:{position:"absolute",width:"100%",top:0,bottom:0}}})),A=function(t){t.viewport;var e=t.setViewport,n=N(),i=Object(c.useRef)(null);return y.a.accessToken=Object({NODE_ENV:"production",PUBLIC_URL:"/waterfront-hack2020",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).APIMAPBOX,Object(c.useEffect)((function(){var t=new y.a.Map({container:i.current,style:"mapbox://styles/gkarapi/cki4z3dbx1bst19rn9i2zmkug",center:[10.015,44.895],attributionControl:!1,maxZoom:7.6,zoom:3.8}),n=new C.a({accessToken:y.a.accessToken,mapboxgl:y.a});return n.setTypes("country,place"),t.addControl(n,"top-left"),t.addControl(new y.a.NavigationControl),n.on("result",(function(t){console.log(t),e({place:t.result.text||null,lat:t.result.center[0]||null,long:t.result.center[1]||null,wikidata:t.result.properties.wikidata||null})})),function(){return t.remove()}}),[]),Object(a.jsx)("div",{ref:i,className:n.map})},D=Object(s.a)((function(t){return{map:{zIndex:1},panel:{zIndex:2,position:"absolute",bottom:0}}})),R=function(){var t=D(),e=Object(c.useState)({place:null,lat:null,long:null,wikidata:null}),n=Object(l.a)(e,2),i=n[0],r=n[1];return Object(a.jsxs)("div",{className:t.root,children:[Object(a.jsx)(A,{className:t.map,viewport:i,setViewport:r}),Object(a.jsx)(u.a,{direction:"up",in:i.place,mountOnEnter:!0,unmountOnExit:!0,children:Object(a.jsxs)(j.a,{container:!0,className:t.panel,children:[Object(a.jsx)(j.a,{item:!0,md:6,sm:6,xs:12,children:Object(a.jsx)(S,{child:Object(a.jsx)(m,{viewport:i})})}),Object(a.jsx)(j.a,{item:!0,md:6,sm:6,xs:12,children:Object(a.jsx)(S,{title:"Air Quality",child:Object(a.jsx)(k,{viewport:i})})})]})})]})};var K=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(R,{})})};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(K,{})}),document.getElementById("root"))}},[[481,1,2]]]);
//# sourceMappingURL=main.b6ff35f4.chunk.js.map